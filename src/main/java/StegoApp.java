import java.awt.image.BufferedImage;
import java.io.IOException;

import javax.swing.JFrame;

import java.awt.*;

import com.google.zxing.WriterException;
import com.google.zxing.client.j2se.MatrixToImageWriter;


/*
 * This Java source file was generated by the Gradle 'init' task.
 */
public class StegoApp extends JFrame {
		
	public static void main(String[] args) {
        try {
            // Payload.generateQRCodeImage("This is my first QR Code", 250, 250, Payload.QR_CODE_IMAGE_PATH);
            BufferedImage qrCode = MatrixToImageWriter.toBufferedImage(Payload.getQRCodeImage("This is my first QR Code", 350, 350));
            String decodedText = Payload.decodeQRCode(qrCode);
            if(decodedText == null) {
                System.out.println("No QR Code found in the image");
            } else {
                System.out.println("Decoded text = " + decodedText);
            }
        } catch (WriterException e) {
            System.out.println("Could not generate QR Code, WriterException :: " + e.getMessage());
        } catch (IOException e) {
            System.out.println("Could not generate QR Code, IOException :: " + e.getMessage());
        }
        
		new StegoApp("Steganography");

    } // end main
	
	public StegoApp(String title) {
		super(title);
		this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
		UI stegoUI = new UI(this);
		this.add(stegoUI);
		this.pack();
		this.setLocationRelativeTo(null);
		this.setVisible(true);
	}
}
